                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.0 #9253 (Apr  4 2022) (Linux)
                              4 ; This file was generated Mon Apr  4 14:15:45 2022
                              5 ;--------------------------------------------------------
                              6 	.hd64
                              7 	.module _strtok
                              8 	.optsdcc -mz180
                              9 	
                             10 ;--------------------------------------------------------
                             11 ; Public variables in this module
                             12 ;--------------------------------------------------------
                             13 	.globl _strtok
                             14 ;--------------------------------------------------------
                             15 ; special function registers
                             16 ;--------------------------------------------------------
                             17 ;--------------------------------------------------------
                             18 ; ram data
                             19 ;--------------------------------------------------------
                             20 	.area _DATA
   0000                      21 _strtok_s_1_22:
   0000                      22 	.ds 2
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _INITIALIZED
                             27 ;--------------------------------------------------------
                             28 ; absolute external ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DABS (ABS)
                             31 ;--------------------------------------------------------
                             32 ; global & static initialisations
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _GSINIT
                             36 	.area _GSFINAL
                             37 	.area _GSINIT
                             38 ;--------------------------------------------------------
                             39 ; Home
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _HOME
                             43 ;--------------------------------------------------------
                             44 ; code
                             45 ;--------------------------------------------------------
                             46 	.area _CODE
                             47 ;../_strtok.c:36: char * strtok ( char * str, const char * control )
                             48 ;	---------------------------------
                             49 ; Function strtok
                             50 ; ---------------------------------
   0000                      51 _strtok::
                             52 ;../_strtok.c:41: if ( str )
   0000 21 03 00      [ 9]   53 	ld	hl, #2+1
   0003 39            [ 7]   54 	add	hl, sp
   0004 7E            [ 6]   55 	ld	a, (hl)
   0005 2B            [ 4]   56 	dec	hl
   0006 B6            [ 6]   57 	or	a,(hl)
   0007 28 0C         [ 8]   58 	jr	Z,00102$
                             59 ;../_strtok.c:42: s = str;
   0009 11r00r00      [ 9]   60 	ld	de, #_strtok_s_1_22
   000C 21 02 00      [ 9]   61 	ld	hl, #2
   000F 39            [ 7]   62 	add	hl, sp
   0010 01 02 00      [ 9]   63 	ld	bc, #2
   0013 ED B0         [14]   64 	ldir
   0015                      65 00102$:
                             66 ;../_strtok.c:43: if ( !s )
   0015 3Ar01r00      [12]   67 	ld	a,(#_strtok_s_1_22 + 1)
   0018 21r00r00      [ 9]   68 	ld	hl,#_strtok_s_1_22 + 0
   001B B6            [ 6]   69 	or	a,(hl)
   001C 20 04         [ 8]   70 	jr	NZ,00108$
                             71 ;../_strtok.c:44: return NULL;
   001E 21 00 00      [ 9]   72 	ld	hl,#0x0000
   0021 C9            [ 9]   73 	ret
                             74 ;../_strtok.c:46: while (*s) {
   0022                      75 00108$:
   0022 2Ar00r00      [15]   76 	ld	hl,(_strtok_s_1_22)
   0025 7E            [ 6]   77 	ld	a,(hl)
   0026 B7            [ 4]   78 	or	a, a
   0027 28 2A         [ 8]   79 	jr	Z,00110$
                             80 ;../_strtok.c:47: if (strchr(control,*s))
   0029 5F            [ 4]   81 	ld	e,a
   002A 17            [ 3]   82 	rla
   002B 9F            [ 4]   83 	sbc	a, a
   002C 57            [ 4]   84 	ld	d,a
   002D FD 21 04 00   [12]   85 	ld	iy,#4
   0031 FD 39         [10]   86 	add	iy,sp
   0033 FD 6E 00      [14]   87 	ld	l,0 (iy)
   0036 FD 66 01      [14]   88 	ld	h,1 (iy)
   0039                      89 00158$:
   0039 7E            [ 6]   90 	ld	a, (hl)
   003A BB            [ 4]   91 	cp	a, e
   003B 28 06         [ 8]   92 	jr	Z,00157$
   003D B7            [ 4]   93 	or	a, a
   003E 23            [ 4]   94 	inc	hl
   003F 20 F8         [ 8]   95 	jr	NZ, 00158$
   0041 6F            [ 4]   96 	ld	l, a
   0042 67            [ 4]   97 	ld	h, a
   0043                      98 00157$:
   0043 7C            [ 4]   99 	ld	a,h
   0044 B5            [ 4]  100 	or	a,l
   0045 28 0C         [ 8]  101 	jr	Z,00110$
                            102 ;../_strtok.c:48: s++;
   0047 21r00r00      [ 9]  103 	ld	hl, #_strtok_s_1_22+0
   004A 34            [10]  104 	inc	(hl)
   004B 20 D5         [ 8]  105 	jr	NZ,00108$
   004D 21r01r00      [ 9]  106 	ld	hl, #_strtok_s_1_22+1
   0050 34            [10]  107 	inc	(hl)
   0051 18 CF         [ 8]  108 	jr	00108$
                            109 ;../_strtok.c:50: break;
   0053                     110 00110$:
                            111 ;../_strtok.c:53: s1 = s;
   0053 ED 5Br00r00   [18]  112 	ld	de,(_strtok_s_1_22)
                            113 ;../_strtok.c:55: while (*s) {
   0057                     114 00113$:
                            115 ;../_strtok.c:46: while (*s) {
   0057 2Ar00r00      [15]  116 	ld	hl,(_strtok_s_1_22)
   005A 7E            [ 6]  117 	ld	a,(hl)
                            118 ;../_strtok.c:55: while (*s) {
   005B B7            [ 4]  119 	or	a, a
   005C 28 3A         [ 8]  120 	jr	Z,00115$
                            121 ;../_strtok.c:56: if (strchr(control,*s)) {
   005E 47            [ 4]  122 	ld	b,a
   005F 17            [ 3]  123 	rla
   0060 9F            [ 4]  124 	sbc	a, a
   0061 FD 21 04 00   [12]  125 	ld	iy,#4
   0065 FD 39         [10]  126 	add	iy,sp
   0067 FD 6E 00      [14]  127 	ld	l,0 (iy)
   006A FD 66 01      [14]  128 	ld	h,1 (iy)
   006D                     129 00161$:
   006D 7E            [ 6]  130 	ld	a, (hl)
   006E B8            [ 4]  131 	cp	a, b
   006F 28 06         [ 8]  132 	jr	Z,00160$
   0071 B7            [ 4]  133 	or	a, a
   0072 23            [ 4]  134 	inc	hl
   0073 20 F8         [ 8]  135 	jr	NZ, 00161$
   0075 6F            [ 4]  136 	ld	l, a
   0076 67            [ 4]  137 	ld	h, a
   0077                     138 00160$:
   0077 7C            [ 4]  139 	ld	a,h
   0078 B5            [ 4]  140 	or	a,l
   0079 28 11         [ 8]  141 	jr	Z,00112$
                            142 ;../_strtok.c:57: *s++ = '\0';
   007B 2Ar00r00      [15]  143 	ld	hl,(_strtok_s_1_22)
   007E 36 00         [ 9]  144 	ld	(hl),#0x00
   0080 21r00r00      [ 9]  145 	ld	hl, #_strtok_s_1_22+0
   0083 34            [10]  146 	inc	(hl)
   0084 20 04         [ 8]  147 	jr	NZ,00162$
   0086 21r01r00      [ 9]  148 	ld	hl, #_strtok_s_1_22+1
   0089 34            [10]  149 	inc	(hl)
   008A                     150 00162$:
                            151 ;../_strtok.c:58: return s1;
   008A EB            [ 3]  152 	ex	de,hl
   008B C9            [ 9]  153 	ret
   008C                     154 00112$:
                            155 ;../_strtok.c:60: s++ ;
   008C 21r00r00      [ 9]  156 	ld	hl, #_strtok_s_1_22+0
   008F 34            [10]  157 	inc	(hl)
   0090 20 C5         [ 8]  158 	jr	NZ,00113$
   0092 21r01r00      [ 9]  159 	ld	hl, #_strtok_s_1_22+1
   0095 34            [10]  160 	inc	(hl)
   0096 18 BF         [ 8]  161 	jr	00113$
   0098                     162 00115$:
                            163 ;../_strtok.c:63: s = NULL;
   0098 21 00 00      [ 9]  164 	ld	hl,#0x0000
   009B 22r00r00      [16]  165 	ld	(_strtok_s_1_22),hl
                            166 ;../_strtok.c:65: if (*s1)
   009E 1A            [ 6]  167 	ld	a,(de)
   009F B7            [ 4]  168 	or	a, a
   00A0 28 02         [ 8]  169 	jr	Z,00117$
                            170 ;../_strtok.c:66: return s1;
   00A2 EB            [ 3]  171 	ex	de,hl
   00A3 C9            [ 9]  172 	ret
   00A4                     173 00117$:
                            174 ;../_strtok.c:68: return NULL;
   00A4 21 00 00      [ 9]  175 	ld	hl,#0x0000
   00A7 C9            [ 9]  176 	ret
                            177 	.area _CODE
                            178 	.area _INITIALIZER
                            179 	.area _CABS (ABS)
