                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.0 #9253 (Apr  4 2022) (Linux)
                              4 ; This file was generated Mon Apr  4 14:15:44 2022
                              5 ;--------------------------------------------------------
                              6 	.hd64
                              7 	.module rand
                              8 	.optsdcc -mz180
                              9 	
                             10 ;--------------------------------------------------------
                             11 ; Public variables in this module
                             12 ;--------------------------------------------------------
                             13 	.globl _rand
                             14 	.globl _srand
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
   0000                      26 _next:
   0000                      27 	.ds 4
                             28 ;--------------------------------------------------------
                             29 ; absolute external ram data
                             30 ;--------------------------------------------------------
                             31 	.area _DABS (ABS)
                             32 ;--------------------------------------------------------
                             33 ; global & static initialisations
                             34 ;--------------------------------------------------------
                             35 	.area _HOME
                             36 	.area _GSINIT
                             37 	.area _GSFINAL
                             38 	.area _GSINIT
                             39 ;--------------------------------------------------------
                             40 ; Home
                             41 ;--------------------------------------------------------
                             42 	.area _HOME
                             43 	.area _HOME
                             44 ;--------------------------------------------------------
                             45 ; code
                             46 ;--------------------------------------------------------
                             47 	.area _CODE
                             48 ;../rand.c:33: int rand(void)
                             49 ;	---------------------------------
                             50 ; Function rand
                             51 ; ---------------------------------
   0000                      52 _rand::
                             53 ;../rand.c:35: next = next * 1103515245UL + 12345;
   0000 2Ar02r00      [15]   54 	ld	hl,(_next + 2)
   0003 E5            [11]   55 	push	hl
   0004 2Ar00r00      [15]   56 	ld	hl,(_next)
   0007 E5            [11]   57 	push	hl
   0008 21 C6 41      [ 9]   58 	ld	hl,#0x41C6
   000B E5            [11]   59 	push	hl
   000C 21 6D 4E      [ 9]   60 	ld	hl,#0x4E6D
   000F E5            [11]   61 	push	hl
   0010 CDr00r00      [16]   62 	call	__mullong
   0013 33            [ 4]   63 	inc	sp
   0014 33            [ 4]   64 	inc	sp
   0015 33            [ 4]   65 	inc	sp
   0016 33            [ 4]   66 	inc	sp
   0017 33            [ 4]   67 	inc	sp
   0018 33            [ 4]   68 	inc	sp
   0019 33            [ 4]   69 	inc	sp
   001A 33            [ 4]   70 	inc	sp
   001B 4D            [ 4]   71 	ld	c,l
   001C 44            [ 4]   72 	ld	b,h
   001D 79            [ 4]   73 	ld	a,c
   001E 21r00r00      [ 9]   74 	ld	hl,#_next
   0021 C6 39         [ 6]   75 	add	a, #0x39
   0023 77            [ 7]   76 	ld	(hl),a
   0024 78            [ 4]   77 	ld	a,b
   0025 CE 30         [ 6]   78 	adc	a, #0x30
   0027 23            [ 4]   79 	inc	hl
   0028 77            [ 7]   80 	ld	(hl),a
   0029 7B            [ 4]   81 	ld	a,e
   002A CE 00         [ 6]   82 	adc	a, #0x00
   002C 23            [ 4]   83 	inc	hl
   002D 77            [ 7]   84 	ld	(hl),a
   002E 7A            [ 4]   85 	ld	a,d
   002F CE 00         [ 6]   86 	adc	a, #0x00
   0031 23            [ 4]   87 	inc	hl
   0032 77            [ 7]   88 	ld	(hl),a
                             89 ;../rand.c:36: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
   0033 F5            [11]   90 	push	af
   0034 FD 21r00r00   [12]   91 	ld	iy,#_next
   0038 FD 6E 00      [14]   92 	ld	l,0 (iy)
   003B FD 21r00r00   [12]   93 	ld	iy,#_next
   003F FD 66 01      [14]   94 	ld	h,1 (iy)
   0042 FD 21r00r00   [12]   95 	ld	iy,#_next
   0046 FD 5E 02      [14]   96 	ld	e,2 (iy)
   0049 FD 21r00r00   [12]   97 	ld	iy,#_next
   004D FD 56 03      [14]   98 	ld	d,3 (iy)
   0050 F1            [ 9]   99 	pop	af
   0051 06 10         [ 6]  100 	ld	b,#0x10
   0053                     101 00103$:
   0053 CB 3A         [ 7]  102 	srl	d
   0055 CB 1B         [ 7]  103 	rr	e
   0057 CB 1C         [ 7]  104 	rr	h
   0059 CB 1D         [ 7]  105 	rr	l
   005B 10 F6         [ 9]  106 	djnz	00103$
   005D CB BC         [ 7]  107 	res	7, h
   005F C9            [ 9]  108 	ret
                            109 ;../rand.c:39: void srand(unsigned int seed)
                            110 ;	---------------------------------
                            111 ; Function srand
                            112 ; ---------------------------------
   0060                     113 _srand::
                            114 ;../rand.c:41: next = seed;
   0060 21 02 00      [ 9]  115 	ld	hl, #2+0
   0063 39            [ 7]  116 	add	hl, sp
   0064 7E            [ 6]  117 	ld	a, (hl)
   0065 32r00r00      [13]  118 	ld	(#_next + 0),a
   0068 21 03 00      [ 9]  119 	ld	hl, #2+1
   006B 39            [ 7]  120 	add	hl, sp
   006C 7E            [ 6]  121 	ld	a, (hl)
   006D 32r01r00      [13]  122 	ld	(#_next + 1),a
   0070 21r02r00      [ 9]  123 	ld	hl,#_next + 2
   0073 36 00         [ 9]  124 	ld	(hl), #0x00
   0075 21r03r00      [ 9]  125 	ld	hl,#_next + 3
   0078 36 00         [ 9]  126 	ld	(hl), #0x00
   007A C9            [ 9]  127 	ret
                            128 	.area _CODE
                            129 	.area _INITIALIZER
   0000                     130 __xinit__next:
   0000 01 00 00 00         131 	.byte #0x01,#0x00,#0x00,#0x00	; 1
                            132 	.area _CABS (ABS)
