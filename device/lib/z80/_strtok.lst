                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.0 #9253 (Apr  4 2022) (Linux)
                              4 ; This file was generated Mon Apr  4 14:15:28 2022
                              5 ;--------------------------------------------------------
                              6 	.module _strtok
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _strtok
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ; ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
   0000                      20 _strtok_s_1_22:
   0000                      21 	.ds 2
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;../_strtok.c:36: char * strtok ( char * str, const char * control )
                             47 ;	---------------------------------
                             48 ; Function strtok
                             49 ; ---------------------------------
   0000                      50 _strtok::
                             51 ;../_strtok.c:41: if ( str )
   0000 FD 21 02 00   [14]   52 	ld	iy,#2
   0004 FD 39         [15]   53 	add	iy,sp
   0006 FD 7E 01      [19]   54 	ld	a,1 (iy)
   0009 FD B6 00      [19]   55 	or	a,0 (iy)
   000C 28 0E         [12]   56 	jr	Z,00102$
                             57 ;../_strtok.c:42: s = str;
   000E FD 7E 00      [19]   58 	ld	a,0 (iy)
   0011 32r00r00      [13]   59 	ld	(#_strtok_s_1_22 + 0),a
   0014 21 03 00      [10]   60 	ld	hl, #2+1
   0017 39            [11]   61 	add	hl, sp
   0018 7E            [ 7]   62 	ld	a, (hl)
   0019 32r01r00      [13]   63 	ld	(#_strtok_s_1_22 + 1),a
   001C                      64 00102$:
                             65 ;../_strtok.c:43: if ( !s )
   001C 3Ar01r00      [13]   66 	ld	a,(#_strtok_s_1_22 + 1)
   001F 21r00r00      [10]   67 	ld	hl,#_strtok_s_1_22 + 0
   0022 B6            [ 7]   68 	or	a,(hl)
   0023 20 04         [12]   69 	jr	NZ,00108$
                             70 ;../_strtok.c:44: return NULL;
   0025 21 00 00      [10]   71 	ld	hl,#0x0000
   0028 C9            [10]   72 	ret
                             73 ;../_strtok.c:46: while (*s) {
   0029                      74 00108$:
   0029 2Ar00r00      [16]   75 	ld	hl,(_strtok_s_1_22)
   002C 7E            [ 7]   76 	ld	a,(hl)
   002D B7            [ 4]   77 	or	a, a
   002E 28 2A         [12]   78 	jr	Z,00110$
                             79 ;../_strtok.c:47: if (strchr(control,*s))
   0030 5F            [ 4]   80 	ld	e,a
   0031 17            [ 4]   81 	rla
   0032 9F            [ 4]   82 	sbc	a, a
   0033 57            [ 4]   83 	ld	d,a
   0034 FD 21 04 00   [14]   84 	ld	iy,#4
   0038 FD 39         [15]   85 	add	iy,sp
   003A FD 6E 00      [19]   86 	ld	l,0 (iy)
   003D FD 66 01      [19]   87 	ld	h,1 (iy)
   0040                      88 00158$:
   0040 7E            [ 7]   89 	ld	a, (hl)
   0041 BB            [ 4]   90 	cp	a, e
   0042 28 06         [12]   91 	jr	Z,00157$
   0044 B7            [ 4]   92 	or	a, a
   0045 23            [ 6]   93 	inc	hl
   0046 20 F8         [12]   94 	jr	NZ, 00158$
   0048 6F            [ 4]   95 	ld	l, a
   0049 67            [ 4]   96 	ld	h, a
   004A                      97 00157$:
   004A 7C            [ 4]   98 	ld	a,h
   004B B5            [ 4]   99 	or	a,l
   004C 28 0C         [12]  100 	jr	Z,00110$
                            101 ;../_strtok.c:48: s++;
   004E 21r00r00      [10]  102 	ld	hl, #_strtok_s_1_22+0
   0051 34            [11]  103 	inc	(hl)
   0052 20 D5         [12]  104 	jr	NZ,00108$
   0054 21r01r00      [10]  105 	ld	hl, #_strtok_s_1_22+1
   0057 34            [11]  106 	inc	(hl)
   0058 18 CF         [12]  107 	jr	00108$
                            108 ;../_strtok.c:50: break;
   005A                     109 00110$:
                            110 ;../_strtok.c:53: s1 = s;
   005A ED 5Br00r00   [20]  111 	ld	de,(_strtok_s_1_22)
                            112 ;../_strtok.c:55: while (*s) {
   005E                     113 00113$:
                            114 ;../_strtok.c:46: while (*s) {
   005E 2Ar00r00      [16]  115 	ld	hl,(_strtok_s_1_22)
   0061 7E            [ 7]  116 	ld	a,(hl)
                            117 ;../_strtok.c:55: while (*s) {
   0062 B7            [ 4]  118 	or	a, a
   0063 28 3A         [12]  119 	jr	Z,00115$
                            120 ;../_strtok.c:56: if (strchr(control,*s)) {
   0065 47            [ 4]  121 	ld	b,a
   0066 17            [ 4]  122 	rla
   0067 9F            [ 4]  123 	sbc	a, a
   0068 FD 21 04 00   [14]  124 	ld	iy,#4
   006C FD 39         [15]  125 	add	iy,sp
   006E FD 6E 00      [19]  126 	ld	l,0 (iy)
   0071 FD 66 01      [19]  127 	ld	h,1 (iy)
   0074                     128 00161$:
   0074 7E            [ 7]  129 	ld	a, (hl)
   0075 B8            [ 4]  130 	cp	a, b
   0076 28 06         [12]  131 	jr	Z,00160$
   0078 B7            [ 4]  132 	or	a, a
   0079 23            [ 6]  133 	inc	hl
   007A 20 F8         [12]  134 	jr	NZ, 00161$
   007C 6F            [ 4]  135 	ld	l, a
   007D 67            [ 4]  136 	ld	h, a
   007E                     137 00160$:
   007E 7C            [ 4]  138 	ld	a,h
   007F B5            [ 4]  139 	or	a,l
   0080 28 11         [12]  140 	jr	Z,00112$
                            141 ;../_strtok.c:57: *s++ = '\0';
   0082 2Ar00r00      [16]  142 	ld	hl,(_strtok_s_1_22)
   0085 36 00         [10]  143 	ld	(hl),#0x00
   0087 21r00r00      [10]  144 	ld	hl, #_strtok_s_1_22+0
   008A 34            [11]  145 	inc	(hl)
   008B 20 04         [12]  146 	jr	NZ,00162$
   008D 21r01r00      [10]  147 	ld	hl, #_strtok_s_1_22+1
   0090 34            [11]  148 	inc	(hl)
   0091                     149 00162$:
                            150 ;../_strtok.c:58: return s1;
   0091 EB            [ 4]  151 	ex	de,hl
   0092 C9            [10]  152 	ret
   0093                     153 00112$:
                            154 ;../_strtok.c:60: s++ ;
   0093 21r00r00      [10]  155 	ld	hl, #_strtok_s_1_22+0
   0096 34            [11]  156 	inc	(hl)
   0097 20 C5         [12]  157 	jr	NZ,00113$
   0099 21r01r00      [10]  158 	ld	hl, #_strtok_s_1_22+1
   009C 34            [11]  159 	inc	(hl)
   009D 18 BF         [12]  160 	jr	00113$
   009F                     161 00115$:
                            162 ;../_strtok.c:63: s = NULL;
   009F 21 00 00      [10]  163 	ld	hl,#0x0000
   00A2 22r00r00      [16]  164 	ld	(_strtok_s_1_22),hl
                            165 ;../_strtok.c:65: if (*s1)
   00A5 1A            [ 7]  166 	ld	a,(de)
   00A6 B7            [ 4]  167 	or	a, a
   00A7 28 02         [12]  168 	jr	Z,00117$
                            169 ;../_strtok.c:66: return s1;
   00A9 EB            [ 4]  170 	ex	de,hl
   00AA C9            [10]  171 	ret
   00AB                     172 00117$:
                            173 ;../_strtok.c:68: return NULL;
   00AB 21 00 00      [10]  174 	ld	hl,#0x0000
   00AE C9            [10]  175 	ret
                            176 	.area _CODE
                            177 	.area _INITIALIZER
                            178 	.area _CABS (ABS)
